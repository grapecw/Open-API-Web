<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<body onload="draw_m()">

	

	<canvas id="m" style="border: 1px solid red" width="500" height="400">
	
	</canvas>
		<br>
	<button onclick="save();">저장하기</button>
	<button onclick="restore();">불러오기</button>
	<button onclick="initialize();">청소하기</button>
	<script>
	var canvas = document.getElementById('m');
		function save() {
			alert(canvas.toDataURL());
			localStorage.setItem("canva", canvas.toDataURL());
		}
		function restore() {
			var img = new Image();
			img.src = localStorage.getItem("canva");
			img.onload = function() {
				ctx.drawImage(img, 0, 0);
			}
		}
		function initialize() {
			canvas = document.getElementById('m');
			if (canvas.getContext) {
				ctx = canvas.getContext('2d');
				ctx.clearRect(0, 0, 500, 400);
			}
		}
		function draw_m() {
			
			if (canvas.getContext) {
				var ctx = canvas.getContext('2d');
				ctx.save();
				// ctx 의 초기 상태를 저장한다. 즉 현재의 자표 저장
				ctx.translate(100, 200);
				ctx.beginPath();
				ctx.arc(0, 0, 100, 0, Math.PI * 2, false);
				ctx.strokeStyle = "yellow";
				ctx.fillStyle = "yellow";
				ctx.fill();
				ctx.stroke();

				ctx.beginPath();
				ctx.arc(-35, -25, 15, 0, Math.PI * 2, false);
				ctx.strokeStyle = "black";
				ctx.fillStyle = "white";
				ctx.fill();
				ctx.stroke();

				ctx.beginPath();
				ctx.arc(35, -25, 15, 0, Math.PI * 2, false);
				ctx.strokeStyle = "black";
				ctx.fillStyle = "white";
				ctx.fill();
				ctx.stroke();

				ctx.beginPath();
				ctx.arc(-35, -30, 5, 0, Math.PI * 2, false);
				ctx.strokeStyle = "black";
				ctx.fillStyle = "black";
				ctx.fill();
				ctx.stroke();

				ctx.beginPath();
				ctx.arc(35, -20, 5, 0, Math.PI * 2, false);
				ctx.strokeStyle = "black";
				ctx.fillStyle = "black";
				ctx.fill();
				ctx.stroke();

				ctx.beginPath();
				ctx.arc(0, 20, 30, Math.PI / 4, Math.PI, false);
				ctx.strokeStyle = "black";
				ctx.fillStyle = "black";
				ctx.fill();
				ctx.stroke();

				//얼굴 1개

				ctx.translate(300, 200);
				ctx.beginPath();
				ctx.arc(0, 0, 100, 0, Math.PI * 2, false);
				ctx.strokeStyle = "yellow";
				ctx.fillStyle = "yellow";
				ctx.fill();
				ctx.stroke();

				ctx.beginPath();
				ctx.arc(-35, -25, 15, 0, Math.PI * 2, false);
				ctx.strokeStyle = "black";
				ctx.fillStyle = "white";
				ctx.fill();
				ctx.stroke();

				ctx.beginPath();
				ctx.arc(35, -25, 15, 0, Math.PI * 2, false);
				ctx.strokeStyle = "black";
				ctx.fillStyle = "white";
				ctx.fill();
				ctx.stroke();

				ctx.beginPath();
				ctx.arc(-40, -30, 5, 0, Math.PI * 2, false);
				ctx.strokeStyle = "black";
				ctx.fillStyle = "black";
				ctx.fill();
				ctx.stroke();

				ctx.beginPath();
				ctx.arc(30, -30, 5, 0, Math.PI * 2, false);
				ctx.strokeStyle = "black";
				ctx.fillStyle = "black";
				ctx.fill();
				ctx.stroke();

				ctx.beginPath();
				ctx.arc(0, 20, 30, Math.PI / 4, Math.PI, false);
				ctx.strokeStyle = "black";
				ctx.fillStyle = "black";
				ctx.fill();
				ctx.stroke();

				// 얼굴 2개

				ctx.translate(0, -250);
				ctx.beginPath();
				ctx.arc(0, 0, 100, 0, Math.PI * 2, false);
				ctx.strokeStyle = "yellow";
				ctx.fillStyle = "yellow";
				ctx.fill();
				ctx.stroke();

				ctx.beginPath();
				ctx.arc(-35, -25, 20, 0, Math.PI * 2, false);
				ctx.strokeStyle = "black";
				ctx.fillStyle = "white";
				ctx.fill();
				ctx.stroke();

				ctx.beginPath();
				ctx.arc(35, -25, 20, 0, Math.PI * 2, false);
				ctx.strokeStyle = "black";
				ctx.fillStyle = "black";
				ctx.fill();
				ctx.stroke();

				ctx.beginPath();
				ctx.arc(-35, -25, 5, 0, Math.PI * 2, false);
				ctx.strokeStyle = "black";
				ctx.fillStyle = "black";
				ctx.fill();
				ctx.stroke();

				ctx.beginPath();
				ctx.arc(0, 20, 30, 0, Math.PI, false);
				ctx.strokeStyle = "black";
				ctx.fillStyle = "black";
				ctx.fill();
				ctx.stroke();

				ctx.lineWidth = 7;
				ctx.beginPath();
				ctx.moveTo(0, -100);
				ctx.quadraticCurveTo(50, 50, 100, 0);
				ctx.stroke();

				// 얼굴 3개
				ctx.closePath();
				//ctx.translate(-400, -150);
				ctx.restore();
				// 저장된 ctx 초기 상태를 불러온다.
			}

		}
	</script>

</body>
</html>