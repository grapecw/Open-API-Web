<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>크리스마스 카드 만들기</title>
<link
	href="https://fonts.googleapis.com/css?family=Cute+Font&display=swap&subset=korean"
	rel="stylesheet">
<link
	href="https://fonts.googleapis.com/css?family=East+Sea+Dokdo&display=swap&subset=korean"
	rel="stylesheet">
<link
	href="https://fonts.googleapis.com/css?family=Poor+Story&display=swap&subset=korean"
	rel="stylesheet">
<link
	href="https://fonts.googleapis.com/css?family=Nanum+Brush+Script&display=swap&subset=korean"
	rel="stylesheet">
<style type="text/css">

#dropbox {
	float: left;
	width: 500px;
	height: 800px;
	margin:auto;
	margin-right: 20px;
	border: 1px solid #999999;
	text-align:center;
}

#picturesbox {
	float: left;
	width: 500px;
	margin:auto;
	border: 1px solid #999999;
	text-align:center;
}

#picturesbox>img {
	float: center;
	padding: 5px;
}

h1 {
	background-image: linear-gradient(-60deg, yellow, #ffeacc, pink);
	margin: 10px auto;
	width: 800px;
	font-size: 2em;
	font-family: 'Poor Story', cursive;
	text-align: center;
	border-radius: 10px;
	padding: 40px;
}

hr {
	border: none;
	border-top: 2px solid Orange;
	color: #fff;
	background-color: #fff;
	height: 1px;
	width: 80%;
	margin: auto;
}

button {
	WIDTH: 100pt;
	HEIGHT: 30pt;
	font: 18px 필기체;
	font-weight: bold;
	background-Color: white;
	border: solid 2px Orange;
	border-radius: 12px;
}

div.button {
	margin: 0 auto;
	width: 35%;
}

div.wrapping{
    margin: 0 auto;
    padding-left : 70px;
}

div.wrapping1{
  
  width : 1100px;
  margin : auto;
  
}

button:hover {
	background-color: Orange;
}

p {
	text-align: center;
}

footer {
	width: 100%;
	height: 150px;
}
</style>
</head>
<body>
	<h1>HTML5로 크리스마스 카드 만들기</h1>
	<hr>
	<br>
	<div class="button">
		<button onclick="save();">저장하기</button>
		<button onclick="restore();">불러오기</button>
		<button onclick="initialize();">지우기</button>
	</div>
	<br>
	<p>
		배경 칼라 설정 : <input type="color" value="#ffffff" onchange="bgcolor(this.value)"> 
		테두리 칼라 설정 : <input type="color" value="#000000" onchange="bordercolor(this.value)">
	</p>
	<p>
		메세지 칼라 설정 : <input type="color" id="msgcolor" value="#ffffff" onchange="mscolor(this.value)"> 
		입력메세지 : <input type="text" id="msg" width="500" onchange="ms(this.value)"> 
		글씨체 : <select id="font" onchange="fc(this.value)">
			<option>cute font</option>
			<option>East Sea Dokdo</option>
			<option>Poor Story</option>
			<option>Nanum Brush Script</option>
		    </select> 
		글씨 크기 : <select id="fontsize" onchange="fontsize(this.value)">
			<option>20px</option>
			<option>25px</option>
			<option>30px</option>
			<option>35px</option>
			<option>40px</option>
			<option>45px</option>
			<option>50px</option>
			<option>55px</option>
			<option>60px</option>
		</select> <br>
	</p>
	<div class="wrapping">
	<div class="wrapping1">
	<section id="dropbox">
		<canvas id="canvas" width="500" height="800"></canvas>
	</section>
	<section id="picturesbox" style="margin-bottom:100px">
		<img id="image1" src="../dndexam/활용이미지들/xmas/g1.png" width="100" height="100"> 
		<img id="image2" src="../dndexam/활용이미지들/xmas/g2.png" width="100" height="100"> 
		<img id="image3" src="../dndexam/활용이미지들/xmas/g3.png" width="100" height="100"> 
		<img id="image4" src="../dndexam/활용이미지들/xmas/g4.png" width="100" height="100"> 
		<img id="image5" src="../dndexam/활용이미지들/xmas/g5.png" width="100" height="100"> 
		<img id="image6" src="../dndexam/활용이미지들/xmas/g6.png" width="100" height="100"> 
		<img id="image7" src="../dndexam/활용이미지들/xmas/g7.png" width="100" height="100"> 
		<img id="image8" src="../dndexam/활용이미지들/xmas/g8.png" width="100" height="100"> 
		<img id="image9" src="../dndexam/활용이미지들/xmas/g9.png" width="100" height="100"> 
		<img id="image10" src="../dndexam/활용이미지들/xmas/g10.png" width="100" height="100">
		<img id="image11" src="../dndexam/활용이미지들/xmas/g11.png" width="100" height="100"> 
		<img id="image12" src="../dndexam/활용이미지들/xmas/g12.png" width="100" height="100">
		<img id="image13" src="../dndexam/활용이미지들/xmas/g13.png" width="100" height="100"> 
		<img id="image14" src="../dndexam/활용이미지들/xmas/g14.png" width="100" height="100">
		<img id="image15" src="../dndexam/활용이미지들/xmas/g15.png" width="100" height="100"> 
		<img id="image16" src="../dndexam/활용이미지들/xmas/g16.png" width="100" height="100">
		<img id="image17" src="../dndexam/활용이미지들/xmas/g17.png" width="100" height="100"> 
		<img id="image18" src="../dndexam/활용이미지들/xmas/g18.png" width="100" height="100">
		<img id="image19" src="../dndexam/활용이미지들/xmas/g19.png" width="100" height="100"> 
		<img id="image20" src="../dndexam/활용이미지들/xmas/g20.png" width="100" height="100">
		<img id="image21" src="../dndexam/활용이미지들/xmas/g21.png" width="100" height="100"> 
		<img id="image22" src="../dndexam/활용이미지들/xmas/g22.png" width="100" height="100">
		<img id="image23" src="../dndexam/활용이미지들/xmas/g23.png" width="100" height="100"> 
		<img id="image24" src="../dndexam/활용이미지들/xmas/g24.png" width="100" height="100">
		<img id="image25" src="../dndexam/활용이미지들/xmas/g25.png" width="100" height="100"> 
		<img id="image26" src="../dndexam/활용이미지들/xmas/g26.png" width="100" height="100">
		<img id="image27" src="../dndexam/활용이미지들/xmas/g27.png" width="100" height="100"> 
		<img id="image28" src="../dndexam/활용이미지들/xmas/g28.png" width="100" height="100">
	</section>
	</div>
	</div>

	<script>
		var drop;
		var canvas;

		var font = "Cute Font";
		function fc(value) {
			var fontlist = document.getElementById("font")
			font = fontlist.options[fontlist.selectedIndex].value;
		}

		var bgcolor = function(value) {
			canvas.fillStyle = value;
			canvas.fillRect(0, 0, 500, 800);
		}
		var bordercolor = function(value) {
			canvas.strokeStyle = value;
			canvas.strokeRect(0, 0, 500, 800);
		}

		function initiate() {
			var images = document.querySelectorAll('#picturesbox > img');
			for (var i = 0; i < images.length; i++) {
				images[i].addEventListener('dragstart', dragged, false);
				images[i].addEventListener('dragend', ending, false);
			}

			drop = document.getElementById('canvas');
			canvas = drop.getContext('2d');

			drop.addEventListener('dragover', function(e) {
				e.preventDefault();
			}, false);
			drop.addEventListener('drop', dropped, false);
			drop.addEventListener('click', msgcolor, false);
		}
		function dragged(e) {
			var elem = e.target;
			e.dataTransfer.setData('aa', elem.getAttribute('id'));
			e.dataTransfer.setDragImage(e.target, 0, 0);
		}
		function dropped(e) {
			e.preventDefault();
			var id = e.dataTransfer.getData('aa');
			var elem = document.getElementById(id);
			var posx = e.pageX - drop.offsetLeft;
			var posy = e.pageY - drop.offsetTop;

			canvas.drawImage(elem, posx, posy, 100, 100);

		}
		function ending(e) {
			elem = e.target;
		}

		function save() {
			alert(drop.toDataURL());
			localStorage.setItem("canvas", drop.toDataURL());
		}
		function restore() {
			var img = new Image();
			img.src = localStorage.getItem("canvas");
			img.onload = function() {
				canvas.drawImage(img, 0, 0);
			}
		}
		function initialize() {
			canvas.clearRect(0, 0, 500, 800);
		}

		var mcolor;
		var msg = "";

		var mscolor = function(value) {
			mcolor = value;
		}
		var ms = function(value) {
			msg = value;
			console.log(msg);
		}
		var fontsizing = "20px"
		function fontsize() {
			var fontsizeList = document.getElementById("fontsize");
			fontsizing = fontsizeList.options[fontsizeList.selectedIndex].value;

		}

		function msgcolor(e) {
			console.log(msg);
			canvas.font = fontsizing + " " + font;
			canvas.fillStyle = mcolor; // 색상
			var posx = e.pageX - drop.offsetLeft;
			var posy = e.pageY - drop.offsetTop;
			canvas.fillText(msg, posx, posy);
		}

		window.addEventListener('load', initiate, false);
	</script>
	
	<footer></footer>
</body>
</html>